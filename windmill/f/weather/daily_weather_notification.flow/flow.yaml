summary: Daily Weather Notification
description: ''
value:
  modules:
    - id: fetch
      value:
        type: script
        input_transforms:
          city:
            type: javascript
            expr: flow_input.city
          weatherapi:
            type: static
            value: '$res:u/vjrasane/openweathermap'
        is_trigger: false
        path: f/weather/fetch_weather
    - id: format
      value:
        type: script
        input_transforms:
          day:
            type: javascript
            expr: flow_input.day
          forecasts:
            type: javascript
            expr: results.fetch
        is_trigger: false
        path: f/weather/format_weather
    - id: notify
      value:
        type: script
        input_transforms:
          message:
            type: javascript
            expr: results.format.message
          title:
            type: javascript
            expr: results.format.title
          topic:
            type: static
            value: weather
        is_trigger: false
        path: f/common/notify_with_ntfy
  failure_module:
    id: failure
    summary: Send to ntfy
    value:
      type: script
      input_transforms:
        previous_result:
          type: static
          value:
            name: error.name
            message: error.message
            stack: error.stack
      hash: null
      is_trigger: false
      path: f/weather/daily_weather_notification/ntfy/send_the_error_to_ntfy
schema:
  $schema: 'https://json-schema.org/draft/2020-12/schema'
  type: object
  order:
    - city
    - day
  properties:
    city:
      type: string
      description: ''
      default: ''
    day:
      type: string
      description: ''
      default: ''
      enum:
        - today
        - tomorrow
      enumLabels: {}
  required: []
